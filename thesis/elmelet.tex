\chapter{Elméleti alapok}

Ebben a fejezetben a gráfátíró rendszerek elméleti alapjaival
foglalkozunk. A formális definíciókhoz szükséges szintaktika
az egyszerûség és érthetõség kedvéért megegyezik a \cite{cleanbook}
jelöléseivel.

\section{Adatgráfok}

Termújraíró rendszerek, hasonlóságok, különbségek, elõnyök
A bevezetõben tárgyalt definíciója az adatgráfoknak egy jó képet ad
arról, hogy miért is fontos ez a fogalom. Ebben a pontban egy pontos,
matematikailag precíz definíciót adunk rájuk, megadjuk a kanonikus
alakukat, egy rövidített leírási formát, illetve egyéb fontos
tulajdonságaikat.

Az egyik fõ cél az adatgráfok definíciójánál, hogy képesek legyenek
reprezentálni a bevezetõ utolsó példájában leírt referencia
konstrukciót. Ez azért hasznos, hogy el tudjuk kerülni egy adott
számítás többszöri kiértékelését, és a már esetleg kiszámolt eredményt
újra fel tudjuk használni. Ezt a technikát a számítások megosztásának
(\emph{sharing}) hívjuk.

\subsection{Szintaxis}

Egy gráfátíró rendszerben az adatgráfokat kétféleképpen írhatjuk le:
kanonikus formában és rövidített formában. Ez utóbbi eset lényege,
hogy nem kell teljesen specifikálni a gráf struktúráját, épp csak
annyit, hogy egyértelmûen ki lehessen következtetni azt a leírásból. A
kanonikus forma esetében ezzel ellentétben az egész struktúrát
részletesen specifikálni kell. Általában a rövidített formát
használjuk az átláthatósága miatt. Fontos megjegyezni, hogy a
rövidített leírásból természetesen elõállítható a kanonikus alak,
ekkor pedig a két leírás pontosan ugyanazt az adatgráfot jelöli, tehát
az egyiket minden további nélkül lehet használni a másik helyett.

A gráf specifikációjához minden esetben szükségünk lesz egy konstans
szimbólumokból (nem üres sztringek, melyek nagybetûvel kezdõdnek)
álló, valamint egy csúcs azonosítókból (kisbetûvel kezdõdõ nemüres
sztringek) és csúcs konstansokból (a ,,@'' kukac karakterrel kezdõdõ
sztringek) álló halmazra.

\subsubsection{Kanonikus alak}

Egy adatgráf kanonikus alakját a következõ szintaxissal definiáljuk:

\vspace{1cm}
\begin{tabular}{l@{\hspace{0.5cm}=\hspace{0.5cm}}l}
  \textit{Graph}   & \textit{NodeDef} \{\textbf{','} \textit{NodeDef}\} ; \\
  \textit{NodeDef} & \textit{Nodeid} \textbf{':'} \textit{Node} ; \\
  \textit{Node}    & \textit{Symbol} \{\textit{Arg}\}  |
  \textit{EmptyNode} ; \\
  \textit{Symbol}  & Constant ; \\
  \textit{Arg}     & \textit{Nodeid} ; \\
  \textit{Nodeid}  & NodeidVariable | NodeidConstant ; \\
  \textit{EmptyNode} & \textbf{'$\bot$'} ;
\end{tabular}
\vspace{1cm}

Egy adatgráf tehát csúcs definíciók (\emph{NodeDef}) egy halmaza. A
gráfban minden csúcshoz tartozik egy egyedi azonosító (\emph{Nodeid}),
mely vagy ,,@''-cal kezdõdik (\emph{NodeidConstant} --- konstans),
vagy kisbetûvel (\emph{NodeidVariable} --- változó). Egy csúcs
definíciójához (\emph{NodeDef}) kell egy ilyen csúcs azonosító, majd
egy ,,:'' karakter után következik a csúcs leírása
(\emph{Node}). Minden csúcshoz tartozik egy konstans szimbólum
(\emph{Symbol}), melynek esetleg argumentumai (\emph{Arg})
lehetnek. Ezek az argumentumok tulajdonképpen csúcs azonosítók, melyek
definiálják az éleket a gráf ábrázolt formájában.

\begin{pelda}
  \Aref{fig:lstdatag} ábrán található adatgráf kanonikus alakja (a
  $(:)$ konstruktornak most a két paraméteres \emph{Cons}, a $[]$
  konstruktornak pedig a \emph{Nil} felel meg):

  \begin{tabular}{l@{:\hspace{0.5cm}}l}
      @1 & \emph{Cons} @2 @3, \\
      @2 & 71, \\
      @3 & \emph{Cons} @4 @5, \\
      @4 & 72, \\
      @5 & \emph{Nil}
  \end{tabular}

  Itt tehát nincsenek változó csúcs azonosítók, csak konstansok (@1
  \dots @5), valamint a konstans szimbólumok a következõk:
  \emph{Cons}, 71, 72, \emph{Nil}.
\end{pelda}

\subsection{Szemantika}

Az adatgráfok szemantikáját a kanonikus alakjuk figyelembevételével,
azok alapján fogjuk megadni.

Minden adatgráfnak létezik egy kitüntetett csúcsa, melyet a gráf
\emph{gyökeré}nek hívunk. A kanonikus alakban mindig ezt a csúcsot
soroljuk fel elõször. Egy adatgráf \emph{részgráf}jának kanonikus
alakja az eredeti gráf kanonikus alakjában található csúcshalmaz
részhalmazából áll. Egy \emph{út} a gráfban olyan csúcs azonosítók
sorozata, melyben az elsõ kivételével minden azonosító a közvetlenül
megelõzõ azonosítóhoz tartozó csúcs egyik argumentuma. Az út $A$-ból
$B$-be megy, ha $A$ azonosítója az elsõ, $B$ azonosítója pedig az
utolsó a sorozatban. A gráfban \emph{kör}nek hívjuk azokat az utakat,
melyeknek ugyanaz az elsõ és az utolsó csúcs azonosítójuk. A gráf
körmentes, ha nincs benne kör. Egy $B$ csúcs \emph{elérhetõ} $A$-ból,
ha létezik a gráfban út $A$-ból $B$-be. Ha minden csúcs elérhetõ a
gyökérbõl, akkor a gráf \emph{összefüggõ}. Egy adatgráfot
\emph{zárt}nak hívunk, ha nincs benne változó csúcs azonosító,
egyébként \emph{nyílt}nak. Egy gráf $n$ \emph{csúcstól kezdõdõ
  részgráfja} az a $g$ összefüggõ részgráf, melynek gyökere $n$, és
tartalmazza mindazokat a csúcsokat, melyek elérhetõek $n$-bõl.

\begin{megj}
  Tartsuk szem elõtt, hogy az adatgráfoknál egy úthoz tartozik annak
  egy irányítása is, tehát a köröknél, illetve az összefüggõségnél is
  figyelembe kell venni ezt az irányítást. Ez a fogalomrendszer nagyon
  hasonlít az irányított gráfoknál szokásoshoz, tulajdonképpen itt is
  errõl van szó, mint azt a bevezetõben említettük.
  Megjegyzendõ továbbá, hogy gráfátíró rendszerekben az összes gráf,
  beleértve a szabályokat is, mindig összefüggõ.
\end{megj}

\begin{pelda}
 \Aref{fig:lstdatag} ábrán látható adatgráf például összefüggõ, de
 körmentes és zárt.

 \begin{figure}[htb]
   \begin{center}
     \caption{Egy végtelen hosszú, végtelenül egyszerû lista
       adatgráfja}
     \includegraphics[height=0.3\textheight]{eps/grw_new_28.eps}
   \end{center}
   \label{fig:inflist}
 \end{figure}
 \Aref{fig:inflist} ábrán található adatgráf a végtelen hosszú, csupa
 tizenegyeseket tartalmazó listához tartozik. Kanonikus alakja:

 \begin{tabular}{l@{:\hspace{0.5cm}}l}
   @1 & \emph{Cons} @2 @1, \\
   @2 & 11
 \end{tabular}

 Ez a gráf látható módon
 véges (mint minden adatgráf), zárt, összefüggõ, és tartalmaz egy kört
 (tehát hurokéleket természetesen megengedünk). Ebbõl a példából is
 látszik a gráfátíró rendszerek (és azon belül egyelõre az adatgráfok)
 kifejezõereje.
\end{pelda}

\begin{figure}[bh]
  \begin{center}
    \caption{Ekvivalens gráfok közti izomorfizmus}
    \includegraphics[width=14cm]{eps/graf_ekv_izo.eps}
  \end{center}
  \label{fig:grafekvizo}
\end{figure}

Két zárt gráfot \emph{ekvivalens}nek nevezünk, ha a csúcs
azonosítóktól eltekintve azonosak. Ez azt jelenti, hogy a két gráfnak
ugyanaz a struktúrája, és a megfelelõ csúcsok ugyanazokat a
szimbólumokat tartalmazzák. Formálisan, létezik egy $\varphi :
\text{NodeidConstant} \rightarrow \text{NodeidConstant}$ bijekció,
melyet ha alkalmazunk az egyik gráf kanonikus alakjában található
csúcs azonosítókra, akkor a másik gráf kanonikus alakját
kapjuk. Figyelembe véve azt, hogy az adatgráf és a kanonikus alakja
között is megadható egy bijekció, ebbõl következik, hogy ha két gráf
ekvivalens, akkor létezik köztük gyökértartó izomorfizmus. Ezt a
gondolatmenetet vázolja \aref{fig:grafekvizo} ábra.

\section{Átíró rendszerek}

\subsection{Szintaxis}

Definíció, kanonikus alak, rövidített alak, szabályok, \dots

\subsection{Szemantika}

Kapcsolódó definíciók, elnevezések, minták, \dots

\section{Gráfátírás}

Mintaillesztés, kötések létrejötte, algoritmus, lépések, példa
Kapcsolódó definíciók, normál formák, redukciós sorozatok, stratégiák
FGRS

%% Local Variables:
%% coding: latin-2
%% End:
